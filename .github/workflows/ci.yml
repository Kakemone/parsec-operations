name: Continuous Integration

on: [push, pull_request]

jobs:
  format:
    name: Check formatting
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Install clang-format
      run: sudo apt install clang-format-6.0
    - name: Check formatting using clang-format
      run: ./ci/check_format.sh

  build:
    name: Build tests
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Install protoc
      run: sudo apt install protobuf-compiler
    - name: Check that the protobuf files compile using protoc
      run: ./ci/check_build.sh
